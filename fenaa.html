<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REÄ°S GALERÄ°CÄ°LÄ°K: SANAYÄ° KAOS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main: #e67e22; --bg: #0b0f19; --card: #161b28; --text: #e2e8f0; --danger: #e74c3c; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; overflow: hidden; }
        .grid { display: grid; grid-template-columns: 400px 1fr 380px; gap: 15px; height: 98vh; }
        .panel { background: var(--card); border-radius: 12px; padding: 15px; border: 1px solid #2d3748; display: flex; flex-direction: column; overflow: hidden; }
        
        /* AI CHAT AREA */
        .ai-chat { flex: 1; overflow-y: auto; background: #05070a; border-radius: 10px; padding: 12px; font-family: 'Courier New', monospace; font-size: 0.85rem; border: 1px solid #2d3748; }
        .chat-msg { margin-bottom: 12px; padding-bottom: 5px; border-bottom: 1px solid #111; }
        .bot-name { color: #f39c12; font-weight: bold; }
        .user-name { color: #3498db; font-weight: bold; }
        .chat-input-area { display: flex; gap: 8px; margin-top: 10px; }
        #user-msg { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid #2d3748; background: #0b0f19; color: white; }

        /* PAZARLIK MODALI */
        #pazarlik-panel { display: none; background: #1f2937; padding: 15px; border-radius: 10px; border: 2px solid var(--main); margin-bottom: 15px; }

        /* CAR CARDS */
        .car-card { background: #1f2937; padding: 15px; border-radius: 10px; margin-bottom: 12px; border: 1px solid #374151; }
        .price { color: #10b981; font-weight: bold; font-size: 1.2rem; }
        .btn { border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-buy { background: #10b981; color: white; width: 100%; }
        
        .header-stats { display: flex; justify-content: space-around; background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 10px; border-bottom: 3px solid var(--main); }
        .stat-val { font-weight: bold; color: var(--main); }
    </style>
</head>
<body>

<div class="header-stats">
    <div>ğŸ’° PARA: <span id="m-money" class="stat-val">750.000</span> TL</div>
    <div>ğŸ’ Ä°TÄ°BAR: <span id="m-rep" class="stat-val">10</span></div>
    <div>ğŸ¢ GARAJ: <span id="m-garage" class="stat-val">0/6</span></div>
</div>

<div class="grid">
    <div class="panel">
        <h2><i class="fas fa-comments"></i> SANAYÄ° WHATSAPP GRUBU</h2>
        <div class="ai-chat" id="chat-box"></div>
        <div class="chat-input-area">
            <input type="text" id="user-msg" placeholder="Mesaj yaz ya da pazarlÄ±k yap..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button class="btn" onclick="sendMessage()" style="background:var(--main); color:white;">Yolla</button>
        </div>
    </div>

    <div class="panel" style="overflow-y: auto;">
        <div id="pazarlik-panel">
            <h3 id="pazarlik-title">PazarlÄ±k: TofaÅŸ Åahin</h3>
            <p>SatÄ±cÄ±: <span id="pazarlik-satici" class="bot-name"></span></p>
            <p>Ä°stenen: <span id="pazarlik-fiyat" style="font-weight:bold;"></span> TL</p>
            <input type="number" id="pazarlik-teklif" placeholder="Teklifin nedir aq?" style="width:100%; padding:10px; margin-bottom:10px;">
            <div style="display:flex; gap:10px;">
                <button class="btn" onclick="pazarlikYap()" style="background:#27ae60; flex:1; color:white;">Teklif Ver</button>
                <button class="btn" onclick="pazarlikIptal()" style="background:#c0392b; flex:1; color:white;">VazgeÃ§</button>
            </div>
        </div>

        <h2><i class="fas fa-shopping-basket"></i> Ä°KÄ°NCÄ° EL PÄ°YASASI</h2>
        <button class="btn" onclick="refreshMarket()" style="background:#3b82f6; width:100%; margin-bottom:15px; color:white;">PÄ°YASAYI YENÄ°LE</button>
        <div id="market-list"></div>
        
        <hr style="border:1px solid #334155; margin:20px 0;">
        <h2><i class="fas fa-warehouse"></i> GARAJIM</h2>
        <div id="garage-list"></div>
    </div>

    <div class="panel">
        <h2><i class="fas fa-landmark"></i> BANKA</h2>
        <button class="btn" onclick="takeLoan()" style="background:#8e44ad; color:white; width:100%;">KREDÄ° Ã‡EK (1.000.000 TL)</button>
        <p id="loan-info" style="font-size:0.8rem; color:var(--danger); text-align:center;">BorÃ§: 0 TL</p>
        
        <h2 style="margin-top:30px;"><i class="fas fa-users-cog"></i> AKTÄ°F GALERÄ°CÄ°LER</h2>
        <div id="bot-status-list" style="font-size:0.85rem;"></div>
    </div>
</div>

<script>
let state = { money: 750000, rep: 10, garage: [], loan: 0, usd: 31.50 };
const bots = [
    { name: "GÃ¶lcÃ¼klÃ¼_Apo", mood: "Asabi", bio: "TofaÅŸÃ§Ä±" },
    { name: "Mercedes_HÃ¼seyin", mood: "Keyifli", bio: "Galerici" },
    { name: "KaportacÄ±_Fiko", mood: "Normal", bio: "Usta" },
    { name: "Zengin_Mert", mood: "Kibirli", bio: "ZÃ¼ppe" }
];

let aktifPazarlik = null;

function init() {
    refreshMarket();
    setInterval(botKendiArasindaKonus, 8000);
    setInterval(() => { state.usd += (Math.random()*0.1 - 0.05); updateUI(); }, 5000);
    updateUI();
    addChatMsg("SÄ°STEM", "Sanayi grubu aÃ§Ä±ldÄ±. KÃ¼fÃ¼r serbest ama dozu kaÃ§Ä±rma aq.", "system-msg");
}

// --- AKILLI CHAT VE PAZARLIK ---
function sendMessage() {
    const input = document.getElementById("user-msg");
    const msg = input.value.trim();
    if(!msg) return;

    addChatMsg("SEN", msg, "user-name");
    input.value = "";

    setTimeout(() => {
        const bot = bots[Math.floor(Math.random()*bots.length)];
        let reply = "";
        
        if(msg.toLowerCase().includes("selam")) reply = "As Reis, hayÄ±rlÄ± iÅŸler.";
        else if(msg.toLowerCase().includes("fiyat")) reply = "Piyasa Ã§ok karÄ±ÅŸÄ±k aq, kimse Ã¶nÃ¼nÃ¼ gÃ¶remiyor.";
        else if(msg.toLowerCase().includes("dolar")) reply = "Dolar fÄ±rlarsa sanayide dÃ¼kkanÄ± kapatÄ±rÄ±z.";
        else reply = "Neden bahsediyon aq, iÅŸine bak piyasayÄ± bulandÄ±rma.";

        addChatMsg(bot.name, reply, "bot-name");
    }, 800);
}

function botKendiArasindaKonus() {
    const bot1 = bots[Math.floor(Math.random()*bots.length)];
    const bot2 = bots.filter(b => b.name !== bot1.name)[Math.floor(Math.random()*(bots.length-1))];
    
    const diyaloglar = [
        ["Lan HÃ¼seyin, o kazalÄ± BMW'yi kime kilitledin aq?", "Sana ne lan, alan memnun satan memnun!"],
        ["Beyler dolar fÄ±rlÄ±yor, araba satmayÄ±n bekleyin.", "Biz taÅŸ mÄ± yicez aq, mecburi satÄ±yoruz."],
        ["GÃ¶lcÃ¼k sanayi bugÃ¼n Ã§ok durgun ya.", "Herkes Bitcoin peÅŸinde koÅŸuyor, galerici mi kaldÄ±?"],
        ["GeÃ§en bi' mÃ¼ÅŸteri geldi 100 bin altÄ±na istiyor, sÃ¶ve sÃ¶ve kovdum.", "Ä°yi yapmÄ±ÅŸsÄ±n Reis, Ã¶lÃ¼cÃ¼lere yer yok."]
    ];
    
    const secilen = diyaloglar[Math.floor(Math.random()*diyaloglar.length)];
    addChatMsg(bot1.name, secilen[0], "bot-name");
    setTimeout(() => addChatMsg(bot2.name, secilen[1], "bot-name"), 2000);
}

function addChatMsg(user, text, className) {
    const box = document.getElementById("chat-box");
    box.innerHTML += `<div class="chat-msg"><span class="${className}">${user}:</span> ${text}</div>`;
    box.scrollTop = box.scrollHeight;
}

// --- PAZARLIK SÄ°STEMÄ° ---
function pazarlikBaslat(id) {
    const item = marketItems.find(x => x.id === id);
    const bot = bots[Math.floor(Math.random()*bots.length)];
    aktifPazarlik = { ...item, satici: bot };
    
    document.getElementById("pazarlik-panel").style.display = "block";
    document.getElementById("pazarlik-title").innerText = "PazarlÄ±k: " + item.name;
    document.getElementById("pazarlik-satici").innerText = bot.name;
    document.getElementById("pazarlik-fiyat").innerText = item.price.toLocaleString();
    addChatMsg(bot.name, `Gel gel, ${item.name} iÃ§in bir orta yol buluruz.`, "bot-name");
}

function pazarlikYap() {
    const teklif = parseInt(document.getElementById("pazarlik-teklif").value);
    if(!teklif || teklif <= 0) return;

    const bot = aktifPazarlik.satici;
    const asilFiyat = aktifPazarlik.price;

    if(teklif >= asilFiyat * 0.95) {
        addChatMsg(bot.name, "Tamam lan, kÄ±rmÄ±yorum seni. HayÄ±rlÄ± olsun aq.", "bot-name");
        satinAl(teklif);
    } else if (teklif >= asilFiyat * 0.85) {
        if(Math.random() > 0.5) {
            addChatMsg(bot.name, "Biraz daha Ã§Ä±karsan el sÄ±kÄ±ÅŸÄ±rÄ±z bak.", "bot-name");
        } else {
            addChatMsg(bot.name, "Lan bizi mi koparÄ±yon? Az daha Ã§Ä±k bari.", "bot-name");
        }
    } else {
        addChatMsg(bot.name, "Siktir git baÅŸka kapÄ±ya, bu paraya lastiÄŸini vermem!", "bot-name");
        pazarlikIptal();
    }
}

function satinAl(fiyat) {
    if(state.money >= fiyat && state.garage.length < 6) {
        state.money -= fiyat;
        state.garage.push({ name: aktifPazarlik.name, price: fiyat });
        marketItems = marketItems.filter(x => x.id !== aktifPazarlik.id);
        pazarlikIptal();
        updateUI();
    }
}

function pazarlikIptal() {
    document.getElementById("pazarlik-panel").style.display = "none";
    aktifPazarlik = null;
}

// --- EKONOMÄ° VE PÄ°YASA ---
let marketItems = [];
function refreshMarket() {
    state.money -= 2000;
    const arabalar = [{n:"TofaÅŸ Åahin", p:250000}, {n:"VW Passat", p:1800000}, {n:"TOGG T10X", p:2200000}, {n:"BMW M5", p:9000000}];
    marketItems = Array.from({length:3}, () => {
        const r = arabalar[Math.floor(Math.random()*arabalar.length)];
        return { id: Math.random(), name: r.n, price: Math.floor(r.p * (0.8 + Math.random()*0.4)) };
    });
    updateUI();
}

function updateUI() {
    document.getElementById("m-money").innerText = Math.floor(state.money).toLocaleString();
    document.getElementById("m-rep").innerText = state.rep;
    document.getElementById("m-garage").innerText = `${state.garage.length}/6`;
    document.getElementById("loan-info").innerText = "BorÃ§: " + state.loan.toLocaleString() + " TL";

    document.getElementById("market-list").innerHTML = marketItems.map(c => `
        <div class="car-card">
            <b>${c.name}</b><br><span class="price">${c.price.toLocaleString()} TL</span>
            <button class="btn btn-buy" onclick="pazarlikBaslat(${c.id})" style="margin-top:10px;">PAZARLIK YAP / AL</button>
        </div>
    `).join('');

    document.getElementById("garage-list").innerHTML = state.garage.map((c, i) => `
        <div class="car-card" style="border-left:5px solid var(--main)">
            <b>${c.name}</b><br>Maliyet: ${c.price.toLocaleString()}
            <button class="btn" onclick="sellCar(${i})" style="background:var(--main); color:white; width:100%; margin-top:5px;">SAT</button>
        </div>
    `).join('');

    document.getElementById("bot-status-list").innerHTML = bots.map(b => `
        <div style="margin-bottom:5px;">ğŸ‘¤ ${b.name} - <span style="color:#f1c40f">${b.mood}</span></div>
    `).join('');
}

function sellCar(idx) {
    const offer = Math.floor(state.garage[idx].price * (0.9 + Math.random()*0.6));
    if(confirm(`${offer.toLocaleString()} TL veriyorlar aq. SatalÄ±m mÄ±?`)) {
        state.money += offer;
        state.rep += 5;
        state.garage.splice(idx, 1);
        updateUI();
    }
}

function takeLoan() { if(state.loan == 0) { state.loan = 1000000; state.money += 1000000; updateUI(); } }

init();
</script>
</body>
</html>
