<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Galeri Tycoon: Kesin Ã‡Ã¶zÃ¼m</title>
<style>
    :root { --bg: #0a0a0a; --gold: #ffd700; --red: #ff4d4d; --green: #2ecc71; --blue: #3498db; }
    body { margin: 0; background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
    
    /* TÄ±klama sorununu Ã§Ã¶zen ana katman */
    #main-ui { 
        position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
        z-index: 999; pointer-events: none; 
        display: flex; flex-direction: column; justify-content: space-between; padding: 20px; box-sizing: border-box; 
    }

    .clickable { pointer-events: all !important; }

    .panel { background: rgba(20,20,20,0.95); border: 2px solid #333; border-radius: 12px; padding: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.8); }

    /* ÃœST PANEL */
    .top-bar { display: flex; gap: 20px; justify-content: space-around; align-items: center; }
    .bar-wrap { width: 80px; height: 10px; background: #222; border-radius: 5px; overflow: hidden; border: 1px solid #444; }
    .bar-fill { height: 100%; transition: 0.5s; width: 50%; }

    /* OYUN ALANI */
    .game-body { display: flex; justify-content: space-between; flex: 1; margin: 20px 0; gap: 20px; }
    
    .nav-menu { width: 220px; display: flex; flex-direction: column; gap: 10px; }
    .nav-item { padding: 15px; border-radius: 8px; background: #1a1a1a; cursor: pointer; text-align: center; border: 1px solid #444; transition: 0.2s; }
    .nav-item:hover { border-color: var(--blue); background: #222; }
    .nav-item.active { background: var(--blue); border-color: #fff; font-weight: bold; }

    .center-stage { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    .npc-area { text-align: center; background: rgba(0,0,0,0.5); padding: 20px; border-radius: 20px; border: 1px solid #222; width: 80%; }

    .right-panel { width: 280px; }

    /* BUTONLAR */
    .btn { width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: white; margin-top: 8px; text-transform: uppercase; }
    .btn:active { transform: scale(0.95); }
    .btn-green { background: var(--green); }
    .btn-blue { background: var(--blue); }
    .btn-red { background: var(--red); }
    .btn-gold { background: var(--gold); color: #000; }

    input#galName { background: none; border: 1px dashed #555; color: var(--gold); text-align: center; font-size: 1.2em; width: 100%; margin-bottom: 10px; pointer-events: all; }

    /* 3D ARKA PLAN */
    canvas { position: fixed; top: 0; left: 0; z-index: 1; }
</style>
</head>
<body>

<div id="main-ui">
    <div class="panel top-bar clickable">
        <div style="color:var(--gold); font-weight:bold;">ğŸ’° <span id="m-val">300.000</span></div>
        <div>ğŸ• AÃ§lÄ±k <div class="bar-wrap"><div id="b-hunger" class="bar-fill" style="background:var(--red)"></div></div></div>
        <div>ğŸ§˜ Stres <div class="bar-wrap"><div id="b-stress" class="bar-fill" style="background:var(--gold)"></div></div></div>
        <div>ğŸ•Œ Ä°man <div class="bar-wrap"><div id="b-faith" class="bar-fill" style="background:var(--green)"></div></div></div>
        <div style="color:var(--blue); font-weight:bold;">ğŸ“… <span id="d-val">Pazartesi</span></div>
    </div>

    <div class="game-body">
        <div class="nav-menu">
            <div class="nav-item clickable active" id="nav-galeri" onclick="go('galeri')">ğŸ¢ GALERÄ° MERKEZ</div>
            <div class="nav-item clickable" id="nav-mahalle" onclick="go('mahalle')">ğŸ  MAHALLE & CAMÄ°</div>
            <div class="nav-item clickable" id="nav-sanayi" onclick="go('sanayi')">ğŸ”§ SANAYÄ° SÄ°TESÄ°</div>
            <div class="nav-item clickable" id="nav-tefeci" onclick="go('tefeci')">ğŸ’€ TEFECÄ° (BABA)</div>
            <button class="btn btn-red clickable" onclick="nextDay()" style="margin-top:auto">ğŸŒ™ GÃœNÃœ BÄ°TÄ°R</button>
        </div>

        <div class="center-stage">
            <div class="npc-area clickable">
                <div id="npc-avatar" style="font-size: 5em;">ğŸ¤µ</div>
                <h3 id="npc-title">Galerici Mahmut</h3>
                <p id="npc-speech">"Piyasa bugÃ¼n alev alev kral!"</p>
                <div id="action-btns">
                    </div>
            </div>
        </div>

        <div class="panel right-panel clickable">
            <input type="text" id="galName" value="TUNA GALERÄ°">
            <div id="car-preview" style="height: 120px; background: #111; border: 1px solid #333; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 4em;">ğŸ¢</div>
            <h4 id="car-name" style="text-align:center; margin:0">ARAÃ‡ YOK</h4>
            <p id="car-stat" style="text-align:center; color:#888; font-size:0.8em; margin: 5px 0;">DeÄŸer: -</p>
            <div id="car-ctrl">
                 <button class="btn btn-blue" id="main-act-btn" onclick="pazarAra()">ğŸš— ARABA ARA</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
const carModels = [
    {n:"TofaÅŸ Åahin", p:250000, c:0xffffff, icon:"ğŸš—"},
    {n:"Fiat Egea", p:900000, c:0xaaaaaa, icon:"ğŸš™"},
    {n:"BMW M4", p:6000000, c:0x0000ff, icon:"ğŸï¸"},
    {n:"Mercedes G63", p:16000000, c:0x222222, icon:"ğŸšœ"}
];

let state = { money: 300000, hunger: 20, stress: 10, faith: 50, day: 0, loc: 'galeri', car: null, npcPrice: 0, tempCar: null };

// 3D SAHNE (SADECE GÃ–RSEL)
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
const light = new THREE.DirectionalLight(0xffffff, 1); light.position.set(5,10,5); scene.add(light);
scene.add(new THREE.AmbientLight(0xffffff, 0.5));
camera.position.set(5, 5, 5); camera.lookAt(0,0,0);

function go(target) {
    state.loc = target;
    document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
    document.getElementById('nav-' + target).classList.add('active');
    
    const btns = document.getElementById('action-btns');
    btns.innerHTML = "";
    
    if(target === 'galeri') {
        setNPC("ğŸ¤µ", "Galerici Mahmut", "HayÄ±rlÄ± iÅŸler kral, ne yapÄ±yoruz?");
    } else if(target === 'mahalle') {
        setNPC("ğŸ‘³", "HacÄ± Abi", "Selamun aleykÃ¼m, cami ve market burada.");
        btns.innerHTML = `<button class="btn btn-green" onclick="pray()">ğŸ•Œ NAMAZ KIL (Ä°MAN +40)</button>
                          <button class="btn btn-gold" onclick="eat()">ğŸ›’ MARKET (-â‚º2.000)</button>`;
    } else if(target === 'sanayi') {
        setNPC("ğŸ‘¨â€ğŸ”§", "Usta Nuri", "Getir arabayÄ± da canavar yapalÄ±m.");
        if(state.car) btns.innerHTML = `<button class="btn btn-blue" onclick="modify()">ğŸ› ï¸ MODÄ°FÄ°YE YAP (-â‚º100k)</button>`;
        else setNPC("ğŸ‘¨â€ğŸ”§", "Usta Nuri", "E hani araba? BoÅŸ dÃ¼kkana mÄ± geldin?");
    } else if(target === 'tefeci') {
        setNPC("ğŸ•¶ï¸", "Tefeci Remzi", "Paraya mÄ± sÄ±kÄ±ÅŸtÄ±n? Gel gel...");
        btns.innerHTML = `<button class="btn btn-red" onclick="kredi()">ğŸ’° â‚º200k KREDÄ° Ã‡EK</button>`;
    }
    updateUI();
}

function setNPC(icon, name, speech) {
    document.getElementById('npc-avatar').innerText = icon;
    document.getElementById('npc-title').innerText = name;
    document.getElementById('npc-speech').innerText = `"${speech}"`;
}

function updateUI() {
    document.getElementById('m-val').innerText = state.money.toLocaleString();
    document.getElementById('b-hunger').style.width = state.hunger + "%";
    document.getElementById('b-stress').style.width = state.stress + "%";
    document.getElementById('b-faith').style.width = state.faith + "%";
    document.getElementById('d-val').innerText = ["Pzt", "Sal", "Ã‡ar", "Per", "Cum", "Cmt", "Paz"][state.day];

    if(state.car) {
        document.getElementById('car-preview').innerText = state.car.icon;
        document.getElementById('car-name').innerText = state.car.n;
        document.getElementById('car-stat').innerText = "DeÄŸer: â‚º" + (state.car.p).toLocaleString();
        document.getElementById('main-act-btn').innerText = "ğŸ’° MÃœÅTERÄ° ARA";
        document.getElementById('main-act-btn').onclick = satisBaslat;
    } else {
        document.getElementById('car-preview').innerText = "ğŸ¢";
        document.getElementById('car-name').innerText = "ARAÃ‡ YOK";
        document.getElementById('main-act-btn').innerText = "ğŸš— ARABA ARA";
        document.getElementById('main-act-btn').onclick = pazarAra;
    }
}

function pazarAra() {
    if(state.loc !== 'galeri') { alert("Galeriye gitmelisin!"); return; }
    let car = carModels[Math.floor(Math.random()*carModels.length)];
    state.tempCar = car;
    state.npcPrice = Math.floor(car.p * (0.9 + Math.random() * 0.2));
    setNPC("ğŸ‘¤", "SatÄ±cÄ±", `Bu ${car.n} iÃ§in â‚º${state.npcPrice.toLocaleString()} istiyorum.`);
    document.getElementById('action-btns').innerHTML = `
        <button class="btn btn-green" onclick="buyConfirm()">âœ… SATIN AL</button>
        <button class="btn btn-blue" onclick="pazarlik()">ğŸ¤ PAZARLIK ET</button>
    `;
}

function pazarlik() {
    if(state.faith > 60) {
        state.npcPrice = Math.floor(state.npcPrice * 0.9);
        setNPC("ğŸ‘¤", "SatÄ±cÄ±", "DÃ¼rÃ¼st adama benziyorsun, fiyattan indim.");
    } else {
        alert("Ä°man barÄ±n dÃ¼ÅŸÃ¼k, sana gÃ¼venmiyorlar!");
    }
}

function buyConfirm() {
    if(state.money >= state.npcPrice) {
        state.money -= state.npcPrice;
        state.car = state.tempCar;
        go('galeri');
    } else alert("Para yetmiyor!");
}

function satisBaslat() {
    let p = Math.floor(state.car.p * (0.8 + Math.random() * 0.6));
    state.npcPrice = p;
    setNPC("ğŸ¤µ", "MÃ¼ÅŸteri", `â‚º${p.toLocaleString()} nakit veririm.`);
    document.getElementById('action-btns').innerHTML = `<button class="btn btn-green" onclick="sellConfirm()">ğŸ¤ SATTIM GÄ°TTÄ°</button>`;
}

function sellConfirm() {
    state.money += state.npcPrice;
    state.car = null;
    go('galeri');
}

function pray() { state.faith = 100; state.stress = 0; alert("Huzur buldun."); updateUI(); }
function eat() { state.money -= 2000; state.hunger = 0; updateUI(); }
function modify() { state.money -= 100000; state.car.p += 300000; alert("Araba fena oldu!"); updateUI(); }
function kredi() { state.money += 200000; alert("Tefeci parayÄ± verdi, dikkatli Ã¶de."); updateUI(); }

function nextDay() {
    state.day++; if(state.day > 6) state.day = 0;
    state.hunger += 20;
    if(state.day === 6) { state.money = Math.floor(state.money * 0.85); alert("HaftalÄ±k vergi kesildi!"); }
    go('galeri');
}

function animate() { requestAnimationFrame(animate); renderer.render(scene, camera); }
animate();
updateUI();
</script>
</body>
</html>
