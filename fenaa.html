<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kral Galericilik Sim√ºlat√∂r√º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 { color: #f1c40f; text-shadow: 2px 2px #000; }
        .stats-bar {
            background: #333;
            width: 100%;
            max-width: 800px;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            border: 2px solid #f1c40f;
            font-size: 1.2em;
            font-weight: bold;
        }
        .container {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 1000px;
            flex-wrap: wrap;
        }
        .panel {
            flex: 1;
            background: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            min-width: 300px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .panel h2 { border-bottom: 1px solid #7f8c8d; padding-bottom: 10px; }
        .car-card {
            background: #ecf0f1;
            color: #333;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid #e74c3c;
        }
        .car-card.rare { border-left-color: #f1c40f; }
        .car-info { font-size: 0.9em; }
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }
        .btn-buy { background-color: #27ae60; color: white; }
        .btn-buy:hover { background-color: #2ecc71; }
        .btn-sell { background-color: #e67e22; color: white; }
        .btn-sell:hover { background-color: #d35400; }
        
        #log-area {
            width: 100%;
            max-width: 1000px;
            height: 100px;
            background: #000;
            color: #0f0;
            font-family: monospace;
            padding: 10px;
            margin-top: 20px;
            overflow-y: scroll;
            border: 1px solid #333;
        }
        .clean { color: green; font-weight: bold; }
        .damaged { color: red; font-weight: bold; }
    </style>
</head>
<body>

    <h1>üöó KRAL GALERƒ∞Cƒ∞Lƒ∞K üöó</h1>

    <div class="stats-bar">
        <span id="money">Nakit: 500,000 TL</span>
        <span id="inventory-count">Ara√ßlar: 0/5</span>
        <span id="reputation">ƒ∞tibar: %10</span>
    </div>

    <div class="container">
        <div class="panel">
            <h2>üì¢ ƒ∞HALE (Piyasa)</h2>
            <div id="market-list"></div>
            <button class="btn" style="background:#3498db; color:white; width:100%; margin-top:10px;" onclick="refreshMarket()">üîÑ Piyasayƒ± Yenile (1.000 TL)</button>
        </div>

        <div class="panel">
            <h2>üè† GARAJIM</h2>
            <div id="my-garage"></div>
        </div>
    </div>

    <div id="log-area">Sisteme ho≈ügeldin karde≈üim. Temiz ticaret yapalƒ±m...</div>

    <script>
        // Oyun Deƒüi≈ükenleri
        let money = 500000;
        let reputation = 10;
        let garage = [];
        let maxGarage = 5;
        let market = [];

        // Ara√ß Veritabanƒ±
        const carTypes = [
            { name: "Tofa≈ü ≈ûahin", basePrice: 200000, risk: 0.8 },
            { name: "Honda Civic (VTEC)", basePrice: 800000, risk: 0.4 },
            { name: "VW Passat (A≈üiret)", basePrice: 1500000, risk: 0.3 },
            { name: "Fiat Egea", basePrice: 700000, risk: 0.2 },
            { name: "BMW 3.20i (Yan)", basePrice: 2000000, risk: 0.6 },
            { name: "Toyota Corolla", basePrice: 900000, risk: 0.1 }
        ];

        const conditions = [
            { text: "Doktordan Temiz", val: 1.2 },
            { text: "Keyfe Keder Boyalƒ±", val: 0.9 },
            { text: "√áƒ±tƒ±r Hasarlƒ±", val: 0.7 },
            { text: "Pert Kayƒ±tlƒ±", val: 0.5 },
            { text: "Hatasƒ±z Boyasƒ±z", val: 1.3 }
        ];

        // Yardƒ±mcƒ± Fonksiyonlar
        function log(msg) {
            const logArea = document.getElementById("log-area");
            logArea.innerHTML = `> ${msg}<br>` + logArea.innerHTML;
        }

        function formatMoney(amount) {
            return amount.toLocaleString('tr-TR') + " TL";
        }

        function updateUI() {
            document.getElementById("money").innerText = `Nakit: ${formatMoney(money)}`;
            document.getElementById("inventory-count").innerText = `Ara√ßlar: ${garage.length}/${maxGarage}`;
            document.getElementById("reputation").innerText = `ƒ∞tibar: %${reputation}`;
            
            renderMarket();
            renderGarage();
        }

        // Piyasa Olu≈üturucu
        function generateCar() {
            const carBase = carTypes[Math.floor(Math.random() * carTypes.length)];
            const cond = conditions[Math.floor(Math.random() * conditions.length)];
            
            // Fiyat varyasyonu
            let finalPrice = Math.floor(carBase.basePrice * cond.val * (0.9 + Math.random() * 0.2));
            
            return {
                id: Math.random().toString(36).substr(2, 9),
                name: carBase.name,
                condition: cond.text,
                price: finalPrice,
                realValue: Math.floor(finalPrice * (1.1 + (reputation/500))) // Ger√ßek deƒüeri
            };
        }

        function refreshMarket() {
            if (money < 1000) {
                log("‚ùó Piyasayƒ± yenilemek i√ßin paran yok!");
                return;
            }
            money -= 1000;
            market = [];
            for(let i=0; i<4; i++) {
                market.push(generateCar());
            }
            log("Piyasa yenilendi, yeni ara√ßlar d√º≈üt√º.");
            updateUI();
        }

        // Satƒ±n Alma Mantƒ±ƒüƒ±
        function buyCar(id) {
            if (garage.length >= maxGarage) {
                log("üö´ Garajƒ±n dolu! √ñnce araba sat.");
                return;
            }

            const carIndex = market.findIndex(c => c.id === id);
            const car = market[carIndex];

            if (money >= car.price) {
                money -= car.price;
                garage.push(car);
                market.splice(carIndex, 1);
                log(`‚úÖ ${car.name} satƒ±n alƒ±ndƒ±. Hayrƒ±nƒ± g√∂r.`);
                updateUI();
            } else {
                log("‚ùå Paran yetmiyor knk.");
            }
        }

        // Satƒ±≈ü Mantƒ±ƒüƒ±
        function sellCar(id) {
            const carIndex = garage.findIndex(c => c.id === id);
            const car = garage[carIndex];

            // M√º≈üteri teklifi (Rastgele)
            // ƒ∞tibarƒ±n ne kadar y√ºksekse o kadar iyi teklif gelir
            let offerMultiplier = 0.8 + (Math.random() * 0.5) + (reputation / 200);
            let offer = Math.floor(car.price * offerMultiplier);

            let accept = confirm(`${car.name} i√ßin m√º≈üteri geldi.\n\nAldƒ±ƒüƒ±n Fiyat: ${formatMoney(car.price)}\nM√º≈üteri Teklifi: ${formatMoney(offer)}\n\nSatƒ±yor musun?`);

            if (accept) {
                money += offer;
                let profit = offer - car.price;
                
                if (profit > 0) {
                    reputation = Math.min(100, reputation + 2);
                    log(`üí∞ ${car.name} satƒ±ldƒ±. K√¢r: ${formatMoney(profit)}. ƒ∞tibar arttƒ±.`);
                } else {
                    reputation = Math.max(0, reputation - 1);
                    log(`üìâ ${car.name} zararƒ±na satƒ±ldƒ±. Zarar: ${formatMoney(Math.abs(profit))}.`);
                }

                garage.splice(carIndex, 1);
                updateUI();
            } else {
                log(`M√º≈üteriyi geri √ßevirdin. ${car.name} garajda bekliyor.`);
            }
        }

        function renderMarket() {
            const list = document.getElementById("market-list");
            list.innerHTML = "";
            market.forEach(car => {
                list.innerHTML += `
                <div class="car-card">
                    <div class="car-info">
                        <strong>${car.name}</strong><br>
                        <span class="${car.condition.includes('Hatasƒ±z') ? 'clean' : 'damaged'}">${car.condition}</span><br>
                        Fiyat: ${formatMoney(car.price)}
                    </div>
                    <button class="btn btn-buy" onclick="buyCar('${car.id}')">AL</button>
                </div>`;
            });
        }

        function renderGarage() {
            const list = document.getElementById("my-garage");
            list.innerHTML = "";
            if(garage.length === 0) list.innerHTML = "<p style='text-align:center; color:#7f8c8d'>Garaj bo≈ü, piyasaya bak.</p>";
            
            garage.forEach(car => {
                list.innerHTML += `
                <div class="car-card rare">
                    <div class="car-info">
                        <strong>${car.name}</strong><br>
                        ${car.condition}<br>
                        Maliyet: ${formatMoney(car.price)}
                    </div>
                    <button class="btn btn-sell" onclick="sellCar('${car.id}')">SAT</button>
                </div>`;
            });
        }

        // Oyunu Ba≈ülat
        refreshMarket();
        // ƒ∞lk ba≈üta para kesmesin diye iade et
        money += 1000;
        updateUI();

    </script>
</body>
</html>
