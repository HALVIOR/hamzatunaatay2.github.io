<style>
    /* GALERÄ° TASARIMI */
    #gallery-app { display: none; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; overflow-y: auto; height: 350px; }
    .snap-shot { 
        background: #220000; border: 2px solid var(--pink); border-radius: 10px;
        height: 120px; display: flex; flex-direction: column; align-items: center; justify-content: center;
        font-size: 40px; position: relative; overflow: hidden;
    }
    .snap-shot span { font-size: 10px; position: absolute; bottom: 5px; color: var(--gold); }
    
    /* FOTOÄRAF GELME EFEKTÄ° */
    .flash { animation: flashEffect 0.2s 3; }
    @keyframes flashEffect { 0% { background: #fff; } 100% { background: #000; } }
</style>

<div id="phone">
    <div id="phone-nav" style="display:flex; justify-content: space-around; padding: 10px; border-bottom: 1px solid #333;">
        <button onclick="showApp('chat')" style="background:none; color:#fff; border:none; cursor:pointer;">ğŸ’¬</button>
        <button onclick="showApp('gallery')" style="background:none; color:#fff; border:none; cursor:pointer;">ğŸ–¼ï¸</button>
    </div>
    
    <div id="chat-app">
        <div id="chat-area"></div>
        <div id="msg-input">
            <input type="text" id="minput" placeholder="KÄ±ÅŸkÄ±rtÄ±cÄ± bir ÅŸeyler yaz...">
            <button onclick="sendMsg()">></button>
        </div>
    </div>

    <div id="gallery-app">
        </div>
</div>

<script>
    let unlockedSnaps = [];

    function showApp(app) {
        document.getElementById('chat-app').style.display = app === 'chat' ? 'flex' : 'none';
        document.getElementById('gallery-app').style.display = app === 'gallery' ? 'grid' : 'none';
        if(app === 'gallery') renderGallery();
    }

    function sendMsg() {
        const input = document.getElementById('minput');
        const val = input.value.toLowerCase();
        if(!val) return;

        const chat = document.getElementById('chat-area');
        chat.innerHTML += `<div class="msg my-msg">${input.value}</div>`;
        
        setTimeout(() => {
            let reply = "Umm... Ã‡ok ileri gidiyorsun.";
            let p = partners[selectedIdx];
            
            // "Nude" isteme mantÄ±ÄŸÄ±
            if(val.includes("nude") || val.includes("foto") || val.includes("at")) {
                if(p.desire >= 80) {
                    reply = "Tamam... Sadece senin iÃ§in bir tane Ã§ekiyorum. SakÄ±n kimseye gÃ¶sterme! ğŸ˜‰";
                    unlockPhoto(p.name, p.icon);
                } else {
                    reply = "Ã–nce beni biraz daha etkilemen lazÄ±m yakÄ±ÅŸÄ±klÄ±... (AzgÄ±nlÄ±k %80 olmalÄ±)";
                }
            } else if(val.includes("az") || val.includes("Ä±slan")) {
                reply = "Åu an altÄ±mda hiÃ§bir ÅŸey yok, sadece seni dÃ¼ÅŸÃ¼nÃ¼yorum...";
                p.desire += 15;
            }

            chat.innerHTML += `<div class="msg her-msg">${reply}</div>`;
            chat.scrollTop = chat.scrollHeight;
            init(); // BarlarÄ± gÃ¼ncelle
        }, 1000);
        input.value = "";
    }

    function unlockPhoto(name, icon) {
        // Ekran flaÅŸÄ±
        document.body.classList.add('flash');
        setTimeout(() => document.body.classList.remove('flash'), 600);
        
        alert(`ğŸ”” ${name} sana Ã¶zel bir fotoÄŸraf gÃ¶nderdi!`);
        
        unlockedSnaps.push({
            name: name,
            icon: icon,
            time: new Date().toLocaleTimeString()
        });
    }

    function renderGallery() {
        const gal = document.getElementById('gallery-app');
        gal.innerHTML = "";
        if(unlockedSnaps.length === 0) {
            gal.innerHTML = "<p style='grid-column: 1/3; text-align:center;'>HenÃ¼z Ã¶zel kare yok.</p>";
            return;
        }
        unlockedSnaps.forEach(s => {
            gal.innerHTML += `
                <div class="snap-shot" onclick="viewSnap('${s.name}')">
                    ${s.icon}ğŸ”¥
                    <span>${s.name} - ${s.time}</span>
                </div>
            `;
        });
    }

    function viewSnap(name) {
        const p = partners.find(x => x.name === name);
        alert(`FOTOÄRAF DETAYI (${name}): \n\n${p.icon} Ã¼zerinde sadece dantelli iÃ§ Ã§amaÅŸÄ±rlarÄ±yla yatakta uzanmÄ±ÅŸ, sana bakarak gÃ¼lÃ¼msÃ¼yor. Elinde telefon, vÃ¼cudunun en kÄ±vrÄ±mlÄ± yerlerini kadraja almÄ±ÅŸ... ğŸ”¥ğŸ”`);
    }
</script>
