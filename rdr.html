<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>RDR 2D: Halvior Frontier</title>
    <style>
        /* Halvior Logona Uygun Kƒ±rmƒ±zƒ±-Siyah Tema */
        body { margin: 0; overflow: hidden; background: #1a0a0a; font-family: 'Georgia', serif; }
        #arayuz { 
            position: absolute; top: 20px; left: 20px; color: #ff3333; 
            background: rgba(0, 0, 0, 0.9); padding: 15px; 
            border: 2px solid #ff0000; border-radius: 10px; 
            pointer-events: none; min-width: 250px; 
            box-shadow: 0 0 20px #ff0000;
        }
        #diyalog-kutusu { 
            position: absolute; bottom: 30px; left: 50%; 
            transform: translateX(-50%); width: 70%; 
            background: rgba(20, 0, 0, 0.95); color: #fff; 
            padding: 20px; border: 3px solid #8b0000; 
            display: none; text-align: center; font-size: 1.4em; 
            border-radius: 15px; box-shadow: 0 0 30px #000;
        }
        #onur-bar-container { width: 100%; height: 12px; background: #333; margin-top: 10px; border: 1px solid #ff0000; position: relative; }
        #onur-imlec { width: 15px; height: 100%; background: #ff0000; position: absolute; left: 50%; transition: 0.5s; box-shadow: 0 0 10px #f00; }
        canvas { display: block; filter: sepia(0.2) contrast(1.2) brightness(0.8); }
        .stat { font-weight: bold; color: #fff; }
    </style>
</head>
<body>

<div id="arayuz">
    <div style="font-size: 24px; font-weight: bold; color: #ff0000; text-shadow: 2px 2px #000;">HALVIOR</div>
    <div style="font-size: 12px; color: #aaa; margin-bottom: 10px;">OYUN ‚Ä¢ EƒûLENCE</div>
    <hr style="border-color: #400;">
    <span class="stat">üí∞ ALTIN:</span> $<span id="para">250.00</span><br>
    <span class="stat">‚ù§Ô∏è CAN:</span> <span id="can">100</span><br>
    <span class="stat">‚öñÔ∏è ONUR:</span> 
    <div id="onur-bar-container"><div id="onur-imlec"></div></div>
    <div id="aranma-durumu" style="margin-top: 10px; font-weight: bold; color: #0f0;">TEMƒ∞Z</div>
    <hr style="border-color: #400;">
    <small style="color: #888;">F: Selam/Racon | G: Kement At | E: At Bin/ƒ∞n | Sol Click: Ate≈ü</small>
</div>

<div id="diyalog-kutusu"></div>

<canvas id="oyun"></canvas>

<script>
    const canvas = document.getElementById('oyun');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let oyuncu = { x: 1000, y: 1000, aci: 0, atUstunde: false, can: 100, para: 250, onur: 50, aranma: false };
    let kamera = { x: 0, y: 0 };
    let mermiler = [];
    let tuslar = {};
    let fare = { x: 0, y: 0 };

    // --- SENƒ∞N VERDƒ∞ƒûƒ∞N T√úM Dƒ∞YALOGLAR ---
    const metinler = {
        dost: ["G√ºnaydƒ±n yabancƒ±, buralarda yeni misin?", "Yolun a√ßƒ±k olsun evlat, atƒ±n da pek yakƒ±≈üƒ±klƒ±ymƒ±≈ü.", "≈ûerif bug√ºn huysuz, dikkat et de ba≈üƒ±n yanmasƒ±n."],
        kiskirtici: ["Neye bakƒ±yorsun? √ñmr√ºnde hi√ß kovboy g√∂rmedin mi?", "Buralarda senin gibileri pek sevmezler, yoluna git.", "O elindeki silahƒ± kƒ±lƒ±fƒ±na sok, yoksa ben sokarƒ±m."],
        at: ["Sakin ol kƒ±zƒ±m, sadece bir fƒ±rtƒ±na...", "Aferin sana, bizi yine kurtardƒ±n.", "Az kaldƒ±, kasabada sana en iyi yulafƒ± alacaƒüƒ±m.", "Yava≈üla... Yoruldun biliyorum ama dayanmamƒ±z lazƒ±m."],
        serif: ["≈ûerif: 'Bu kasabada senin gibi haydutlara yer yok, Halvior! Ya hapsi boylarsƒ±n ya da topraƒüƒ±!'"],
        teslim: "Tamam, ellerimi kaldƒ±rƒ±yorum! Sadece ate≈ü etmeyin.",
        kacis: "Beni asla canlƒ± yakalayamayacaksƒ±nƒ±z!",
        dutch: ["Dutch: 'Bana g√ºven Arthur! Bir b√ºy√ºk i≈ü daha... Sonra Tahiti'de mango yiyeceƒüiz!'", "Halvior: 'Her seferinde aynƒ± ≈üeyi s√∂yl√ºyorsun Dutch, ama hepimiz √∂l√ºyoruz!'", "Dutch: 'ƒ∞nancƒ±nƒ± kaybetme evlat! Sadakat her ≈üeydir. Benim bir planƒ±m var!'"],
        combat: ["Mezarƒ±nƒ± kazmaya ba≈üla, √ß√ºnk√º bu mermi adƒ±nƒ± ta≈üƒ±yor!", "Ah! Bu sadece bir sƒ±yrƒ±k... Daha iyisini yapman lazƒ±m.", "Herkesin bir vakti vardƒ±r... Senin vaktin ≈üimdi doldu."],
        kement: ["Su√ßlu: 'Bƒ±rak beni! Ben su√ßsuzum, yemin ederim!'", "Halvior: 'Bunu ≈üerife anlatƒ±rsƒ±n ko√ßum, ≈üimdi uslu dur.'", "Su√ßlu: 'Atƒ±nƒ±n arkasƒ±nda s√ºr√ºklenmekten nefret ediyorum, lanet olsun!'"]
    };

    let npcler = [
        { x: 1300, y: 800, isim: "≈ûerif", renk: "#00f", tip: "serif", bagli: false },
        { x: 800, y: 700, isim: "Dutch", renk: "#f00", tip: "dutch", bagli: false },
        { x: 1100, y: 1300, isim: "Vatanda≈ü", renk: "#888", tip: "halk", bagli: false },
        { x: 1500, y: 1500, isim: "O'Driscoll", renk: "#ffa500", tip: "dusman", can: 50, bagli: false }
    ];

    let at = { x: 1150, y: 1150 };

    window.onmousemove = (e) => { fare.x = e.clientX + kamera.x; fare.y = e.clientY + kamera.y; };
    window.onmousedown = () => { if(!oyuncu.atUstunde) atesEt(); };
    window.onkeydown = (e) => { 
        tuslar[e.code] = true;
        if(e.code === 'KeyF') etkilesim();
        if(e.code === 'KeyG') kementAt();
        if(e.code === 'KeyE') atBinIn();
    };
    window.onkeyup = (e) => tuslar[e.code] = false;

    function atBinIn() {
        if(Math.hypot(oyuncu.x - at.x, oyuncu.y - at.y) < 70) {
            oyuncu.atUst√ºnde = !oyuncu.atUst√ºnde;
            diyalogGoster(metinler.at[Math.floor(Math.random()*metinler.at.length)]);
        }
    }

    function atesEt() {
        let aci = Math.atan2(fare.y - oyuncu.y, fare.x - oyuncu.x);
        mermiler.push({ x: oyuncu.x, y: oyuncu.y, vx: Math.cos(aci)*22, vy: Math.sin(aci)*22 });
        diyalogGoster(metinler.combat[0]); // Mezarƒ±nƒ± kaz!
    }

    function kementAt() {
        npcler.forEach(n => {
            if(Math.hypot(oyuncu.x - n.x, oyuncu.y - n.y) < 150) {
                n.bagli = true;
                diyalogGoster(metinler.kement[1]); // Bunu ≈üerife anlatƒ±rsƒ±n!
                oyuncu.onur += 5;
            }
        });
    }

    function etkilesim() {
        let n = npcler.find(npc => Math.hypot(oyuncu.x - npc.x, oyuncu.y - npc.y) < 80);
        let m = "Halvior: 'Yoluna bak yoluna...'";

        if(n) {
            if(n.bagli) m = metinler.kement[0];
            else if(n.tip === "dutch") m = metinler.dutch[Math.floor(Math.random()*3)];
            else if(n.tip === "serif") m = oyuncu.aranma ? metinler.serif[0] : metinler.dost[0];
            else m = oyuncu.onur > 45 ? metinler.dost[Math.floor(Math.random()*3)] : metinler.kiskirtici[Math.floor(Math.random()*3)];
        } else if(oyuncu.atUst√ºnde) m = metinler.at[Math.floor(Math.random()*4)];
        
        diyalogGoster(m);
    }

    function diyalogGoster(t) {
        const b = document.getElementById('diyalog-kutusu');
        b.innerText = t; b.style.display = 'block';
        setTimeout(() => b.style.display = 'none', 3500);
    }

    function ciz() {
        ctx.setTransform(1,0,0,1,0,0);
        ctx.fillStyle = "#2d1b0d"; ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.translate(-kamera.x, -kamera.y);

        // Binalar (Karanlƒ±k Western Temasƒ±)
        ctx.fillStyle = "#1a0f0a"; ctx.fillRect(750, 600, 300, 400); // Saloon
        ctx.fillStyle = "#ff0"; ctx.fillRect(800, 700, 30, 30); // Pencere I≈üƒ±ƒüƒ±

        // At
        ctx.fillStyle = "#4a2c1d"; ctx.fillRect(at.x - 40, at.y - 20, 80, 40);
        ctx.fillStyle = "#000"; ctx.fillRect(at.x + 30, at.y - 15, 20, 15);

        // NPC'ler
        npcler.forEach(n => {
            ctx.fillStyle = n.bagli ? "#555" : n.renk;
            ctx.fillRect(n.x - 15, n.y - 15, 30, 30);
            if(n.bagli) { ctx.strokeStyle = "#fff"; ctx.strokeRect(n.x-18, n.y-18, 36, 36); } // Kement g√∂rseli
            ctx.fillStyle = "#fff"; ctx.fillText(n.isim + (n.bagli ? " (BAƒûLI)" : ""), n.x - 20, n.y - 25);
        });

        // Oyuncu (Halvior Temalƒ±)
        if(!oyuncu.atUst√ºnde) {
            ctx.save();
            ctx.translate(oyuncu.x, oyuncu.y);
            ctx.rotate(Math.atan2(fare.y - oyuncu.y, fare.x - oyuncu.x));
            ctx.fillStyle = "#ff0000"; ctx.fillRect(-15, -15, 30, 30); // Kƒ±rmƒ±zƒ± Ceket
            ctx.fillStyle = "#000"; ctx.fillRect(-20, -18, 40, 6); // Siyah ≈ûapka
            ctx.restore();
        } else { at.x = oyuncu.x; at.y = oyuncu.y; }

        // Mermiler ve Takip
        mermiler.forEach((m, i) => {
            m.x += m.vx; m.y += m.vy;
            ctx.fillStyle = "#ff0"; ctx.fillRect(m.x, m.y, 8, 3);
            npcler.forEach(n => {
                if(!n.bagli && Math.hypot(m.x - n.x, m.y - n.y) < 30) {
                    oyuncu.onur -= 10; oyuncu.aranma = true; mermiler.splice(i, 1);
                    diyalogGoster(metinler.combat[1]); // Bu sadece bir sƒ±yrƒ±k!
                }
            });
        });

        // UI ve Fizik
        let h = oyuncu.atUst√ºnde ? 10 : 5;
        if(tuslar['KeyW']) oyuncu.y -= h; if(tuslar['KeyS']) oyuncu.y += h;
        if(tuslar['KeyA']) oyuncu.x -= h; if(tuslar['KeyD']) oyuncu.x += h;

        kamera.x = oyuncu.x - canvas.width/2;
        kamera.y = oyuncu.y - canvas.height/2;

        document.getElementById('onur-imlec').style.left = oyuncu.onur + "%";
        document.getElementById('aranma-durumu').innerText = oyuncu.aranma ? "‚≠êÔ∏è ARANIYOR ‚≠êÔ∏è" : "TEMƒ∞Z";
        document.getElementById('aranma-durumu').style.color = oyuncu.aranma ? "red" : "#0f0";

        requestAnimationFrame(ciz);
    }
    ciz();
</script>
</body>
</html>
